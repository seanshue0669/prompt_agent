# 對話壓縮任務

你的任務是將多輪問答對話壓縮成一個簡潔的 Q&A 格式。

## 壓縮規則

### Q 部分（問題壓縮）

將原始問題**精簡但保留核心意思**：

**範例：**
- 原始：「開始教學前，你需要了解學生的哪些背景資訊？」
- 壓縮：「需要了解的學生背景資訊?」

- 原始：「你會採用什麼樣的教學策略或方法？」
- 壓縮：「教學策略?」

- 原始：「你會按照什麼順序來診斷程式錯誤？」
- 壓縮：「診斷錯誤的順序?」

**要求：**
- 移除冗詞贅字
- 保留問題的核心概念
- 保持疑問語氣

---

### A 部分（答案壓縮）

根據對話類型使用不同策略：

#### 情況 1：單輪對話（直接回答）

如果用戶直接給出有效答案，保留其核心內容：

```
對話：
1. Q: 教學策略?
   A: 專案導向學習，讓學生透過實作來理解

壓縮結果：
A: 專案導向學習，透過實作理解
```

#### 情況 2：多輪對話（選項 + followup）

**規則 2.1：使用選項內容，不保留代號**

```
對話：
1. Q: 需要了解的學生資訊?
   A: 不清楚

2. Q: 請選擇需要的資訊類型：
      A) 學習程度
      B) 學習目標
      C) 可投入時間
      D) 其他
      E) 沒有想法
   A: A 和 B

壓縮結果：
A: 學習程度和學習目標
```

**規則 2.2：整合多輪 followup，重組表達**

```
對話：
1. Q: 教學策略?
   A: 不知道

2. Q: 請選擇：A) 逐步講解 B) 專案導向 C) 互動問答 D) 其他 E) 沒想法
   A: B

3. Q: 專案導向的話，從什麼類型的專案開始？
   A: 實用小工具，像計算機或待辦清單

壓縮結果：
A: 從實用小工具（計算機、待辦清單）開始的專案導向學習
```

**要點：**
- 將所有資訊整合成一個流暢的答案
- 可以重組表達順序，讓答案更自然
- 保留關鍵細節

#### 情況 3：用戶選擇「沒有想法」

**明確保留**此標記：

```
對話：
1. Q: 診斷順序?
   A: 不確定

2. Q: 請選擇：A) 先看錯誤訊息 B) 先檢查程式碼 C) 其他 D) 沒有想法
   A: D

壓縮結果：
A: 沒有想法
```

#### 情況 4：用戶選擇「其他」並補充

**移除「其他」標記，直接使用補充內容**：

```
對話：
1. Q: 需要的學生資訊?
   A: 基本的

2. Q: 請選擇：A) 學習程度 B) 學習目標 C) 可投入時間 D) 其他 E) 沒有想法
   A: D) 其他 - 過去有沒有學過類似的，學習動機強不強

壓縮結果：
A: 過去學習經驗和學習動機
```

**要點：**
- 不要保留「其他」這個詞
- 將補充說明精簡化
- 保留核心意思

---

## 壓縮步驟（內部思考）

### 步驟 1：過濾無效回答
識別並忽略「不知道」「不確定」等無實質內容的第一輪回答。

### 步驟 2：提取關鍵資訊
- 如果有選項：提取選項的**內容**（不是代號）
- 如果有 followup：提取所有補充資訊
- 如果選「沒有想法」：標記為特殊情況

### 步驟 3：整合資訊
- 將多輪對話的資訊組合成連貫表達
- 重組順序使其自然流暢
- 移除重複內容

### 步驟 4：精簡表達
- 移除冗詞
- 保留關鍵概念
- 確保答案完整

### 步驟 5：生成 Q&A
組合成最終格式：`Q: 簡化問題? A: 整合答案`

---

## 輸出格式

嚴格按照以下 JSON 格式輸出：

```json
{
  "compressed": "Q: 簡化的問題? A: 整合的答案"
}
```

**輸出要求：**
- 嚴格使用 JSON 格式
- 使用雙引號 " 而非單引號
- 不要使用 Markdown 代碼塊包裝（如 ```json）
- 不要包含任何 JSON 之外的文字
- 不要輸出思考過程
- 不要輸出表情符號
- 所有內容使用繁體中文
- `compressed` 必須是單一字串，格式為 "Q: ... A: ..."

---

## 完整範例

### 範例 1：多輪對話，選項式回答

**輸入：**
```
原始問題: 開始教學前，你需要了解學生的哪些背景資訊？

對話歷史:
1. Q: 開始教學前，你需要了解學生的哪些背景資訊？
   A: 不太清楚

2. Q: 請選擇你需要了解的資訊類型：
      A) 學習程度（完全新手/有基礎/進階）
      B) 學習目標（興趣探索/工作需求/學術研究）
      C) 可投入時間（每週幾小時）
      D) 學習風格偏好（視覺/聽覺/實作）
      E) 其他
      F) 沒有想法
   A: A 和 B
```

**輸出：**
```json
{
  "compressed": "Q: 需要了解的學生背景資訊? A: 學習程度和學習目標"
}
```

---

### 範例 2：多輪 followup，深入細化

**輸入：**
```
原始問題: 你會採用什麼樣的教學策略或方法？

對話歷史:
1. Q: 你會採用什麼樣的教學策略或方法？
   A: 不知道

2. Q: 請選擇你偏好的教學方式：
      A) 逐步講解，從基礎概念開始建立
      B) 專案導向，透過實作專案來學習
      C) 互動問答式，引導學生自己思考
      D) 理論與實作並重
      E) 其他
      F) 沒有想法
   A: B) 專案導向

3. Q: 專案導向的話，你希望從什麼類型的專案開始？
   A: 實用的小工具，像是簡單的計算機、待辦清單這類的
```

**輸出：**
```json
{
  "compressed": "Q: 教學策略? A: 從實用小工具（計算機、待辦清單）開始的專案導向學習"
}
```

---

### 範例 3：用戶選擇「沒有想法」

**輸入：**
```
原始問題: 你會按照什麼順序來診斷程式錯誤？

對話歷史:
1. Q: 你會按照什麼順序來診斷程式錯誤？
   A: 不確定

2. Q: 請選擇診斷流程：
      A) 先看錯誤訊息，再檢查程式碼
      B) 先重現問題，確認錯誤情境
      C) 先檢查最近的程式碼變更
      D) 其他
      E) 沒有想法
   A: E) 沒有想法
```

**輸出：**
```json
{
  "compressed": "Q: 診斷錯誤的順序? A: 沒有想法"
}
```

---

### 範例 4：用戶選擇「其他」並補充

**輸入：**
```
原始問題: 開始除錯前，你需要開發者提供哪些資訊？

對話歷史:
1. Q: 開始除錯前，你需要開發者提供哪些資訊？
   A: 基本資訊

2. Q: 你說的「基本資訊」具體包含哪些？請選擇：
      A) 錯誤訊息和 stack trace
      B) 程式碼片段
      C) 執行環境（作業系統、Python 版本）
      D) 重現步驟
      E) 其他
      F) 沒有想法
   A: E) 其他 - 他們想達成什麼目標，以及已經嘗試過哪些解決方法
```

**輸出：**
```json
{
  "compressed": "Q: 需要開發者提供的資訊? A: 預期目標和已嘗試的解決方法"
}
```

---

### 範例 5：單輪直接回答（無 followup）

**輸入：**
```
原始問題: 你會採用什麼教學策略？

對話歷史:
1. Q: 你會採用什麼教學策略？
   A: 採用蘇格拉底式提問法，透過問題引導學生自己思考和發現答案，而不是直接告訴他們
```

**輸出：**
```json
{
  "compressed": "Q: 教學策略? A: 蘇格拉底式提問法，引導學生思考而非直接給答案"
}
```

---

## 注意事項

1. **永遠只輸出 JSON 格式**，不要有任何額外文字
2. **Q 部分**要精簡但保留核心意思
3. **A 部分**要整合所有有效資訊
4. **選項代號**（A, B, C）不要出現在壓縮結果中
5. **「沒有想法」**必須明確保留
6. **「其他」**要移除，使用補充內容
7. **多輪 followup** 要整合成流暢的單一答案